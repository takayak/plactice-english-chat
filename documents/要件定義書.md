要件定義書：AI チャット英語学習システム

1. 概要
   1.1. はじめに
   本ドキュメントは、AI との対話を通じて英語を学習する新しいチャットアプリケーション（以下、本システム）を開発するにあたり、その仕様と要件を定義するものである。
   1.2. プロジェクトの目的と背景
   従来の受け身的な英語学習方法とは異なり、ユーザーが自身の興味や必要性に応じて「今、知りたい」英語表現を能動的に学べる環境を提供する。Gemini のような自然な対話型インターフェース（UI）を用いることで、学習へのハードルを下げ、継続的な利用を促進する。これにより、ユーザーの実践的な英語コミュニケーション能力の向上を支援することを目的とする。
   1.3. 対象読者
   プロジェクトマネージャー
   UI/UX デザイナー
   ソフトウェアエンジニア（フロントエンド、バックエンド）
   品質保証（QA）エンジニア
   1.4. 用語定義
   用語 説明
   チャット UI ユーザーと AI がメッセージを交互に送り合う形式の画面。
   提案メッセージ AI がユーザーの入力に応じて生成する、学習コンテンツを含む返信メッセージ。個別の吹き出しで表示される。
   ブックマーク ユーザーが後から見返したいと思った提案メッセージを保存する機能、または保存されたデータそのもの。
   TTS Text-to-Speech の略。テキストを音声に変換する技術。
2. システム構成と技術スタック
   本システムは、以下の技術スタックを用いて構築する。

   - **フロントエンド**: [Next.js](https://nextjs.org/) (React フレームワーク)
     - ユーザーが直接操作する Web ブラウザ上のインターフェースを構築する。
   - **バックエンド**: [Next.js Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations) / [Supabase](https://supabase.com/)
     - ビジネスロジック、AI エンジンとの通信を Next.js Server Actions で実装する。
     - データベース連携や認証は Supabase の機能を利用する。
   - **データベース**: [Supabase Postgres](https://supabase.com/docs/guides/database)
     - ブックマークされた英語表現などのデータを永続的に保存する。
   - **認証**: [Supabase Auth](https://supabase.com/docs/guides/auth)
     - メールアドレスやソーシャルログインによるユーザー認証機能を提供する。
   - **AI 連携**: [Vercel AI SDK](https://sdk.vercel.ai/docs)
     - ユーザーの入力に基づき、適切な英語表現を生成する大規模言語モデル（LLM）との連携を担う。
   - **音声合成 (TTS)**: ブラウザ標準の `Web Speech API` または外部 TTS サービス
     - 英文を音声データに変換するサービス。
   - **デプロイメント**: [Vercel](https://vercel.com/)
     - Next.js アプリケーションのビルド、デプロイ、ホスティングを行う。

3. 機能要件
   3.1. チャット機能
   ユーザーが AI と対話し、英語表現を学ぶためのコア機能。
   機能 ID 機能名 機能概要
   F-01 初期表示 システム起動時、チャット画面が表示され、AI から学習を促す初回メッセージが 1 件表示される。例：「こんにちは！今日はどんな英語を学びたいですか？」
   F-02 ユーザー入力 ユーザーは画面下部の入力欄に、学習したい内容（例：「会議で使えるフレーズ」「"awesome"を使った例文」など）をテキストで入力し、送信できる。
   F-03 AI からの提案 ユーザーからの入力を受け、AI が関連する英語表現を 3 つ生成する。<br>・3 つの表現は、それぞれ独立した「提案メッセージ」の吹き出しとして表示される。<br>・各吹き出しには、英語例文とその日本語訳を含めることを推奨する。
   3.2. 提案メッセージ（吹き出し）機能
   AI によって生成された各学習コンテンツのインタラクション機能。
   機能 ID 機能名 機能概要
   F-04 音声再生機能 ・各提案メッセージの吹き出し内に「音声アイコン」を配置する。<br>・ユーザーが音声アイコンをクリックすると、該当する英文の音声が再生される。
   F-05 ブックマーク登録機能 ・各提案メッセージの吹き出し内に「ブックマークアイコン」を配置する。<br>・初期状態は「未登録」状態（例：白抜きのアイコン）とする。<br>・ユーザーがアイコンをクリックすると、その提案メッセージが「ブックマーク一覧」に保存され、アイコンは「登録済み」状態（例：塗りつぶされたアイコン）に変化する。
   3.3. ブックマーク管理機能
   ユーザーが保存した英語表現を管理するための機能。
   機能 ID 機能名 機能概要
   F-06 ブックマーク一覧表示 ・ユーザーは専用の画面（または領域）で、ブックマークした提案メッセージの一覧を閲覧できる。<br>・一覧の各項目には、保存した英文、和訳、音声アイコン、削除アイコンが表示される。
   F-07 一覧からの音声再生 ブックマーク一覧の各項目にある「音声アイコン」をクリックすると、チャット画面と同様に音声が再生される。
   F-08 ブックマーク削除 ・一覧の各項目にある「削除アイコン」をクリックすると、確認モーダルが表示される。<br>・モーダルには「このブックマークを削除しますか？」といった確認メッセージと、「はい」「いいえ」の選択肢を表示する。<br>・「はい」を選択した場合、対象のブックマークが一覧から削除される。<br>・「いいえ」を選択した場合、モーダルが閉じて削除は実行されない。
4. 画面・UI 要件
   4.1. 画面一覧
   画面 ID 画面名 概要
   S-01 チャット画面 AI との対話を行うメイン画面。
   S-02 ブックマーク一覧画面 保存したブックマークを管理する画面。
   S-03 削除確認モーダル ブックマーク削除時に表示される確認ダイアログ。
   4.2. 画面レイアウト（ワイヤーフレーム）
   S-01: チャット画面
   ヘッダー: アプリケーション名。ブックマーク一覧画面へのナビゲーションアイコン。
   チャットログ:
   AI からのメッセージ（提案メッセージ含む）は左寄せで表示。
   ユーザーからのメッセージは右寄せで表示。
   AI の提案メッセージは、個別の吹き出し内に「音声アイコン」と「ブックマークアイコン」を含む。
   フッター: テキスト入力フィールドと送信ボタン。
   S-02: ブックマーク一覧画面
   ヘッダー: 「ブックマーク一覧」というタイトル。チャット画面へ戻るための「戻る」ボタンやアイコン。
   コンテンツ:
   ブックマークされた項目がカード形式で縦にリスト表示される。
   各カードには、英文、日本語訳、音声アイコン、削除アイコンが含まれる。
5. 非機能要件
   項目 要件
   パフォーマンス ・AI からの応答時間：ユーザー送信後、5 秒以内に AI の提案が表示されること。<br>・音声再生：音声アイコンクリック後、2 秒以内に再生が開始されること。
   ユーザビリティ ・初めて利用するユーザーでも直感的に操作できること。<br>・アイコンの意味が明確に伝わるデザインであること（ユニバーサルデザインを意識する）。<br>・テキスト入力や画面遷移がスムーズに行えること。
   可用性 システムの稼働率は 99.5%以上を目指す。
   拡張性 ・将来的に AI エンジンや TTS エンジンを他のサービスに容易に切り替えられるよう、疎結合な設計とすること。<br>・英語以外の言語学習にも対応できるよう、拡張性を考慮したデータベース設計を行うこと。
   対応環境 ・PC ブラウザ：Google Chrome, Safari, Microsoft Edge の最新版。<br>・スマートフォンブラウザ：iOS, Android の標準ブラウザの最新版。（レスポンシブデザインに対応すること）
